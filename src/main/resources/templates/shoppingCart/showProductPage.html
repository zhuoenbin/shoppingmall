<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>購物車</title>
</head>
<body style="height: 100%;">

<div style="position: relative; height: 100%;">

    <div th:replace="~{layout/navbar}" ></div>
    <div class="container" style="padding: 20px">
        <div style="position: relative;">
            <h1>購物車</h1>
            <a class="btn btn-primary" style="position: absolute; right: 20px; top: 50%"> 送出訂單 </a>
        </div>

        <br>

        <th:block th:each=" shoppingCart : ${page.content}">

            <div class="card" style="position: relative;">
                <div class="card-header" style="padding: 5px">
                    商品名  <span th:text="${shoppingCart.product.productName}"></span>
                </div>
                <div class="card-body">
                        User <span th:text="${shoppingCart.users.lastName}"></span>
                        <br>
                        UserId <span th:text="${shoppingCart.users.userId}"></span>
                        <br>
                        商品數量  <span th:text="${shoppingCart.quantity}"></span>
                        <br>
                        金額  $<span th:text="${shoppingCart.unitPrice}"></span>
                        <br>
                        總金額  $<span th:text="${shoppingCart.unitPrice * shoppingCart.quantity}"></span>

                        <div style="position: absolute; right: 40px; top: 50%">
                            <a class="btn btn-primary" th:href="@{/shoppingCart/update(shoppingCartId=${shoppingCart.shoppingCartId}, quantity=${shoppingCart.quantity - 1})}"> - </a>
                            <span th:text="${shoppingCart.quantity}"></span>
                            <a class="btn btn-primary" th:href="@{/shoppingCart/update(shoppingCartId=${shoppingCart.shoppingCartId}, quantity=${shoppingCart.quantity + 1})}"> + </a>
                        </div>

<!--                    賣家 <span th:text="${shoppingCart.seller.sellerName}"></span>-->
<!--                    <br>-->
<!--                    商品上架時間 <span th:text="${#dates.format(product.listingDate, 'yyyy年MM月dd日 HH:mm:ss')}"></span>-->
                </div>
            </div>

            <br>
        </th:block>


        <ul class="pagination" th:if="${page.totalElements != 0}">

            <th:block th:switch="${page.number != 0}">
                <li class="page-item" th:case="${true}">
                    <a class="page-link" th:href="@{/shoppingCart/show?(p=${page.number})}">Previous</a>
                </li>
                <li class="page-item" th:case="${false}">
                    <a class="page-link">Previous</a>
                </li>
            </th:block>

            <!-- 頁數 -->
            <th:block th:each=" pageNumber : ${#numbers.sequence(1, page.totalPages) }">
                <th:block th:switch="${page.number+1 != pageNumber}">
                    <li class="page-item" th:case="${true}">
                        <a class="page-link" th:href="@{/shoppingCart/show?(p=${pageNumber})}">[[${pageNumber}]]</a>
                    </li>
                    <li class="page-item active" th:case="${false}">
                        <span class="page-link" th:text="${pageNumber}"></span>
                    </li>
                </th:block>
            </th:block>

            <th:block th:switch="${page.totalPages != page.number + 1}">
                <li class="page-item" th:case="${true}">
                    <a class="page-link" th:href="@{/shoppingCart/show?(p=${page.number + 2})}">Next</a>
                </li>
                <li class="page-item" th:case="${false}">
                    <a class="page-link">Next</a>
                </li>
            </th:block>

        </ul>
    </div>
</div>
</body>
</html>